<template>
  <button
    class="cell"
    :class="{ 'is-visible': cell.isVisible }"
    @click="$emit('click')"
    @contextmenu="handleRightClick"
  >
    {{
      cell.isVisible
        ? cell.isMine
          ? 'üí£'
          : cell.adjacentMines > 0
            ? cell.adjacentMines
            : ''
        : cell.isFlagged
          ? 'üö©'
          : ''
    }}
  </button>
</template>

<script>
export default {
  props: {
    cell: {
      type: Object,
      required: true,
    },
  },
  emits: ['click', 'rightclick'],
  methods: {
    handleRightClick(event) {
      event.preventDefault() // Prevent default context menu
      this.$emit('rightclick')
    },
  },
}
</script>

<style scoped>
.cell {
  border: 1px solid #ccc;
  font-size: 1.2rem;
  text-align: center;
  cursor: pointer;
  background-color: #eee; /* –¶–≤–µ—Ç –∑–∞–∫—Ä—ã—Ç–æ–π –∫–ª–µ—Ç–∫–∏ */
  flex: 1 0 auto; /*  –í–∞–∂–Ω–æ –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –º–µ—Å—Ç–∞ */
  aspect-ratio: 1 / 1; /*  –Ø—á–µ–π–∫–∏ –≤—Å–µ–≥–¥–∞ –∫–≤–∞–¥—Ä–∞—Ç–Ω—ã–µ */
}

.cell:hover {
  background-color: #ddd;
}

.cell.is-visible {
  background-color: #fff; /* –¶–≤–µ—Ç –æ—Ç–∫—Ä—ã—Ç–æ–π –∫–ª–µ—Ç–∫–∏ */
  border: none;
  cursor: default;
}

/* –¶–≤–µ—Ç–∞ –¥–ª—è —á–∏—Å–µ–ª */
.cell:nth-child(1n).is-visible {
  color: blue;
}
.cell:nth-child(2n).is-visible {
  color: green;
}
.cell:nth-child(3n).is-visible {
  color: red;
}
.cell:nth-child(4n).is-visible {
  color: purple;
}
.cell:nth-child(5n).is-visible {
  color: maroon;
}
.cell:nth-child(6n).is-visible {
  color: teal;
}
.cell:nth-child(7n).is-visible {
  color: black;
}
.cell:nth-child(8n).is-visible {
  color: gray;
}
</style>
